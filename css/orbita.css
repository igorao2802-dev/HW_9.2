:root{
  --bg: #03040a;
  --orbit-stroke: rgba(180,190,200,0.16);
  --earth-size: 96px;
  --moon-size: 22px;
  --orbit-w: 640px;
  --orbit-h: 380px;
  --orbit-duration: 14s;    /* вращение Луны вокруг Земли */
  --earth-spin-duration: 6s; /* вращение Земли вокруг своей оси */
}

/* Базовые стили */
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:var(--bg);font-family:Segoe UI,Roboto,Arial;color:#fff}
.scene{height:100vh;display:flex;align-items:center;justify-content:center;padding:20px}

/* Контейнер орбиты: задаёт размеры эллипса */
.orbit-wrap{
  position:relative;
  width:var(--orbit-w);
  height:var(--orbit-h);
  transform-style:preserve-3d;
  -webkit-font-smoothing:antialiased;
}

/* Видимая траектория — эллипс (border-radius с двумя параметрами) */
.orbit-path{
  position:absolute;inset:0;
  border-radius:50% / 40%;
  border:1px dashed var(--orbit-stroke);
  pointer-events:none;
  z-index:0;
  backdrop-filter: blur(0.2px);
}

/* Небольшой наклон сцены для глубины */
.orbit-wrap.is-tilted{
  transform: rotateX(14deg) rotateZ(-6deg);
  perspective:900px;
}

/* Земля располагается ближе к одному фокусу эллипса (ассиметрично) */
.earth-container{
  position:absolute;
  width:var(--earth-size);
  height:var(--earth-size);
  left:42%;           /* сдвиг от центра для асимметрии (имитация одного фокуса) */
  top:50%;
  transform: translate(-50%,-50%);
  z-index:3;
  transform-style:preserve-3d;
  pointer-events:none;
}

/* Вращение Земли вокруг собственной оси */
.earth-spin{
  width:100%;height:100%;
  border-radius:50%;
  animation:earth-spin var(--earth-spin-duration) linear infinite;
  transform-origin:50% 50%;
  display:flex;align-items:center;justify-content:center;
}

/* Визуал Земли (градиенты для текстуры) */
.earth{
  width:86%;height:86%;
  border-radius:50%;
  background: radial-gradient(circle at 30% 25%, #7fd3ff 0%, #0a6ea6 35%, #023 100%);
  box-shadow:
    0 8px 26px rgba(0,0,0,0.6),
    inset -12px -8px 22px rgba(255,255,255,0.04);
  transform: translateZ(8px); /* лёгкий подъём для 3D эффекта */
}

/* Трек для Луны — вращаем весь контейнер, а Луна фиксирована в верхней точке */
.moon-track{
  position:absolute;
  inset:0;
  transform-origin:50% 50%;
  animation:moon-orbit var(--orbit-duration) linear infinite;
  z-index:2;
}

/* Луна — расположена в верхней точке трека (top:0 + translateX) */
.moon{
  position:absolute;
  left:50%;
  top:0;
  width:var(--moon-size);
  height:var(--moon-size);
  transform: translateX(-50%);
  border-radius:50%;
  background: radial-gradient(circle at 30% 30%, #f6f7f8 0%, #bfbfbf 40%, #616161 100%);
  box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  filter: drop-shadow(0 6px 10px rgba(0,0,0,0.45));
}

/* Тень/плоскость для глубины */
.shadow{
  position:absolute;
  left:50%;
  top:50%;
  width:calc(var(--orbit-w) * 0.08);
  height:18px;
  transform:translate(-50%,-50%) rotateX(85deg);
  border-radius:50%;
  background: linear-gradient(90deg, rgba(0,0,0,0.35), rgba(0,0,0,0.12));
  filter:blur(8px);
  z-index:1;
  pointer-events:none;
}

/* Анимации */
@keyframes moon-orbit{
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Земля вращается вокруг своей оси (видно на градиенте) */
@keyframes earth-spin{
  0%   { transform: rotateY(0deg); }
  100% { transform: rotateY(360deg); }
}

/* Адаптив: уменьшаем сцену на узких экранах */
@media (max-width:720px){
  :root{
    --orbit-w: 420px;
    --orbit-h: 260px;
    --earth-size: 64px;
    --moon-size: 16px;
    --orbit-duration: 16s;
    --earth-spin-duration: 5s;
  }
  .orbit-wrap.is-tilted{ transform: rotateX(12deg) rotateZ(-4deg); }
}

/* Дополнительно: печать / уменьшаем шум в некоторых браузерах */
@media print{
  .orbit-path{ display:none }
  .shadow{ display:none }
}
